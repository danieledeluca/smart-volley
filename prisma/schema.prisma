generator client {
  provider = "prisma-client"
  output   = "../lib/db/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Activity {
  id       Int       @id @default(autoincrement())
  name     String
  athletes Athlete[]
}

model Season {
  id          Int       @id @default(autoincrement())
  starterYear Int       @db.SmallInt
  endYear     Int       @db.SmallInt
  athletes    Athlete[]
}

model Course {
  id       Int       @id @default(autoincrement())
  name     String
  athletes Athlete[]
}

model Parent {
  id       Int       @id @default(autoincrement())
  name     String
  taxCode  String    @db.Char(16)
  athletes Athlete[]
}

model Athlete {
  id                        Int       @id @default(autoincrement())
  name                      String
  birthday                  DateTime  @db.Date
  birthplace                String
  taxCode                   String    @db.Char(16)
  city                      String
  address                   String
  phoneNumber               String
  email                     String    @unique
  parent                    Parent?   @relation(fields: [parentId], references: [id])
  parentId                  Int?
  season                    Season    @relation(fields: [seasonId], references: [id])
  seasonId                  Int
  activity                  Activity  @relation(fields: [activityId], references: [id])
  activityId                Int
  course                    Course    @relation(fields: [courseId], references: [id])
  courseId                  Int
  volleyAccount             Decimal?  @db.Decimal(10, 2)
  volleyBalance             Decimal?  @db.Decimal(10, 2)
  volleyBalanceSecondary    Decimal?  @db.Decimal(10, 2)
  firstInstallment          Decimal?  @db.Decimal(10, 2)
  secondInstallment         Decimal?  @db.Decimal(10, 2)
  thirdInstallment          Decimal?  @db.Decimal(10, 2)
  certificateExpirationDate DateTime? @db.Date
  certificateDownloadUrl    String?
}
